var e=Object.getOwnPropertyNames,t=(e,t,r)=>new Promise((s,a)=>{var o=e=>{try{i(r.next(e))}catch(t){a(t)}},n=e=>{try{i(r.throw(e))}catch(t){a(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,n);i((r=r.apply(e,t)).next())});import{r,j as s,k as a,l as o,p as n,q as i,s as l,F as c,u as d,v as u,x as m,f as p,y as v,z as h,A as f,B as g,C as b}from"./vendor-vue-B-umkNZb.js";import{d as y,c as w,s as _}from"./vendor-store-Cql5Oc8F.js";import{a as k}from"./vendor-utils-CUZGapLB.js";import{h as x}from"./vendor-other-BL_KQfZI.js";var I,O,U=(I={"js/index-Cojr2hFs.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const I=k.create({timeout:1e4,baseURL:"/"});I.interceptors.request.use(e=>e,e=>Promise.reject(e)),I.interceptors.response.use(e=>e&&200<=e.status<=299?e.data:Promise.reject(e),e=>Promise.reject(e));const O=y("article",()=>{const e=r([]);return{articleList:e,getArticleData:()=>t(null,null,function*(){return I("/api/getArticle").then(r=>t(null,null,function*(){e.value=Object.values(r)})).catch(t=>{e.value=[]})})}},{enabled:!0,strategies:[{key:"article",storage:localStorage,paths:["articleList"]}]}),U=w();U.use(_);const j={wmCanvasUrl:"",wmObserver:null,wmDiv:null,updateTimer:null,isUpdating:!1,createWatermark({text:e=["默认水印"],width:t=300,height:r=200,font:s="13px Microsoft YaHei",color:a="rgba(180,180,180,0.3)",lineHeight:o=20,angle:n=-20}){const i=document.createElement("canvas");i.width=t,i.height=r;const l=i.getContext("2d");l.clearRect(0,0,t,r),l.fillStyle=a,l.font=s,l.textBaseline="top",l.setTransform(1,0,0,1,t/2,r/2),l.rotate(n*Math.PI/180);const c=[...e,x().format("YYYY-MM-DD HH:mm:ss")];let d=-c.length*o/2;c.forEach(e=>{const t=l.measureText(e).width;l.fillText(e,-t/2,d),d+=o}),this.wmCanvasUrl=i.toDataURL()},renderWatermark(){if(!this.isUpdating){this.isUpdating=!0;try{const e=document.getElementById("__global_watermark");e&&e.remove();const t=document.createElement("div");t.id="__global_watermark",Object.assign(t.style,{position:"fixed",inset:"0",zIndex:"999999",pointerEvents:"none",backgroundImage:`url(${this.wmCanvasUrl})`,backgroundRepeat:"repeat"}),document.body.appendChild(t),this.wmDiv=t}finally{this.isUpdating=!1}}},startObserver(){this.wmObserver&&this.wmObserver.disconnect(),this.wmObserver=new MutationObserver(e=>{if(this.isUpdating)return;let t=!1;const r=document.getElementById("__global_watermark");e.forEach(e=>{(e.removedNodes.length||e.addedNodes.length||"__global_watermark"===e.target.id&&"style"===e.attributeName)&&(t=!0)}),!t||r&&r.style.backgroundImage===`url("${this.wmCanvasUrl}")`||this.renderWatermark()}),this.wmObserver.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})},setWatermark(e={}){this.createWatermark(e),this.renderWatermark(),this.startObserver()},startAutoUpdate(e,t=1e3){this.stopAutoUpdate(),this.setWatermark(e);const r=()=>{this.createWatermark(e),this.renderWatermark(),this.updateTimer=setTimeout(r,t)};this.updateTimer=setTimeout(r,t)},stopAutoUpdate(){clearTimeout(this.updateTimer),this.updateTimer=null},removeWatermark(){var e;this.stopAutoUpdate(),null==(e=this.wmObserver)||e.disconnect(),this.wmObserver=null;const t=document.getElementById("__global_watermark");t&&t.remove(),this.wmDiv=null,this.isUpdating=!1}},A=(e,t)=>{const r=e.__vccOpts||e;for(const[s,a]of t)r[s]=a;return r},D=A({__name:"App",setup:e=>(j.startAutoUpdate({text:["测试","水印"]}),s(()=>t(null,null,function*(){yield new Promise((e,t)=>{if(document.querySelector("#remote-cdn-script"))return void e();const r=document.createElement("script");r.id="cdn-particles",r.src="https://cdn.jsdelivr.net/npm/canvas-nest.js/dist/canvas-nest.js",r.async=!0,r.defer=!0,r.type="text/javascript",r.color="90,156,254",r.opacity="0.7",r.zIndex="2",r.count="66",r.onload=()=>{var t;null==(t=window.RemoteFunc)||t.call(window),e()},r.onerror=e=>{t(e)},document.body.appendChild(r)})})),(e,t)=>{const r=o("RouterView");return n(),a(r)})},[["__scopeId","data-v-a04d5f18"]]),T={class:"post-item-title"},E={class:"post-item-body"},L={class:"post-item-footer"},P={class:"footer-left"},W=A({__name:"ArticleItem",setup(e){const s=O(),a=r([]);return t(null,null,function*(){yield s.getArticleData(),a.value=s.articleList}),(e,t)=>(n(!0),i(c,null,l(a.value,e=>(n(),i("div",{class:"postsList",key:e.id},[d("div",T,u(e.title),1),d("div",E,u(e.body),1),d("div",L,[d("div",P,"发布者："+u(e.userId),1),t[0]||(t[0]=d("div",{class:"footer-right"},[d("button",null,"11111")],-1))])]))),128))}},[["__scopeId","data-v-c907761d"]]);x.locale("zh-cn");const Y={class:"header-class"},C={class:"right"},M=A({__name:"GlobalTop",setup(e){const t=((e={})=>{const{format:t="YYYY-MM-DD HH:mm:ss",interval:s=1e3,autoUpdate:a=!0}=e,o=r(new Date);let n;return a&&(n=setInterval(()=>{o.value=new Date},s),m(()=>clearInterval(n))),p(()=>x(o.value).format(t))})();return(e,r)=>(n(),i("div",Y,[r[0]||(r[0]=d("div",{class:"left"},"无限公司",-1)),d("div",C,u(v(t)),1)]))}},[["__scopeId","data-v-d4aaec33"]]),H={class:"footer-class"},N=A({},[["render",function(e,t){return n(),i("div",H,"版权所有，翻版必究！")}],["__scopeId","data-v-e18a12ed"]]),R={class:"home"},B=A({__name:"HomeView",setup:e=>(e,t)=>(n(),i("div",R,[h(v(M)),d("div",null,[h(W)]),h(v(N))]))},[["__scopeId","data-v-4446b051"]]),q=f({history:g("/"),routes:[{path:"/",name:"home",component:B,meta:{title:"home"}}]});q.beforeEach((e,t,r)=>{document.title=e.meta.title||"默认标题",r()});const z=b(D);z.use(U),z.use(q),z.mount("#app")}},function(){return O||(0,I[e(I)[0]])((O={exports:{}}).exports,O),O.exports});export default U();
