import{e as t,r as e,m as n,i as r,h as o,a as s,b as a,c,t as i,g as u,o as l,w as f,n as p,d as y,f as d}from"./vendor-vue-BkWnER2I.js";let h;const b=t=>h=t,g=Symbol();function m(t){return t&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t.toJSON}var v,$;function _(){const r=t(!0),o=r.run(()=>e({}));let s=[],a=[];const c=n({install(t){b(c),c._a=t,t.provide(g,c),t.config.globalProperties.$pinia=c,a.forEach(t=>s.push(t)),a=[]},use(t){return this._a?s.push(t):a.push(t),this},_p:s,_a:null,_e:r,_s:new Map,state:o});return c}($=v||(v={})).direct="direct",$.patchObject="patch object",$.patchFunction="patch function";const O=()=>{};function j(t,e,n,r=O){t.add(e);const o=()=>{t.delete(e)&&r()};return!n&&u()&&l(o),o}function S(t,...e){t.forEach(t=>{t(...e)})}const A=t=>t(),w=Symbol(),k=Symbol();function z(t,e){t instanceof Map&&e instanceof Map?e.forEach((e,n)=>t.set(n,e)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],o=t[n];m(o)&&m(r)&&t.hasOwnProperty(n)&&!a(r)&&!c(r)?t[n]=z(o,r):t[n]=r}return t}const E=Symbol();function H(t){return!m(t)||!Object.prototype.hasOwnProperty.call(t,E)}const{assign:I}=Object;function N(t){return!(!a(t)||!t.effect)}function P(n,r,o={},u,l,y){let d;const h=I({actions:{}},o),g={deep:!0};let m,$,_,E=new Set,P=new Set;const J=u.state.value[n];let M;function x(t){let e;m=$=!1,"function"==typeof t?(t(u.state.value[n]),e={type:v.patchFunction,storeId:n,events:_}):(z(u.state.value[n],t),e={type:v.patchObject,payload:t,storeId:n,events:_});const r=M=Symbol();p().then(()=>{M===r&&(m=!0)}),$=!0,S(E,e,u.state.value[n])}y||J||(u.state.value[n]={}),e({});const F=y?function(){const{state:t}=o,e=t?t():{};this.$patch(t=>{I(t,e)})}:O;const C=(t,e="")=>{if(w in t)return t[k]=e,t;const r=function(){b(u);const e=Array.from(arguments),o=new Set,s=new Set;let a;S(P,{args:e,name:r[k],store:q,after:function(t){o.add(t)},onError:function(t){s.add(t)}});try{a=t.apply(this&&this.$id===n?this:q,e)}catch(c){throw S(s,c),c}return a instanceof Promise?a.then(t=>(S(o,t),t)).catch(t=>(S(s,t),Promise.reject(t))):(S(o,a),a)};return r[w]=!0,r[k]=e,r},W={_p:u,$id:n,$onAction:j.bind(null,P),$patch:x,$reset:F,$subscribe(t,e={}){const r=j(E,t,e.detached,()=>o()),o=d.run(()=>f(()=>u.state.value[n],r=>{("sync"===e.flush?$:m)&&t({storeId:n,type:v.direct,events:_},r)},I({},g,e)));return r},$dispose:function(){d.stop(),E.clear(),P.clear(),u._s.delete(n)}},q=s(W);u._s.set(n,q);const B=(u._a&&u._a.runWithContext||A)(()=>u._e.run(()=>(d=t()).run(()=>r({action:C}))));for(const t in B){const e=B[t];if(a(e)&&!N(e)||c(e))y||(J&&H(e)&&(a(e)?e.value=J[t]:z(e,J[t])),u.state.value[n][t]=e);else if("function"==typeof e){const n=C(e,t);B[t]=n,h.actions[t]=e}}return I(q,B),I(i(q),B),Object.defineProperty(q,"$state",{get:()=>u.state.value[n],set:t=>{x(e=>{I(e,t)})}}),u._p.forEach(t=>{I(q,d.run(()=>t({store:q,app:u._a,pinia:u,options:h})))}),J&&y&&o.hydrate&&o.hydrate(q.$state,J),m=!0,$=!0,q}function J(t,e,s){let a;const c="function"==typeof e;function i(s,i){const u=o();(s=s||(u?r(g,null):null))&&b(s),(s=h)._s.has(t)||(c?P(t,e,a,s):function(t,e,r){const{state:o,actions:s,getters:a}=e,c=r.state.value[t];let i;i=P(t,function(){c||(r.state.value[t]=o?o():{});const e=y(r.state.value[t]);return I(e,s,Object.keys(a||{}).reduce((e,o)=>(e[o]=n(d(()=>{b(r);const e=r._s.get(t);return a[o].call(e,e)})),e),{}))},e,r,0,!0)}(t,a,s));return s._s.get(t)}return a=c?s:e,i.$id=t,i}function M(t,e){if(null==t)return;let n=t;for(let r=0;r<e.length;r++){if(void 0===n||void 0===n[e[r]])return;if(null===n||null===n[e[r]])return null;n=n[e[r]]}return n}function x(t,e,n){if(0===n.length)return e;const r=n[0];return n.length>1&&(e=x("object"==typeof t&&null!==t&&Object.prototype.hasOwnProperty.call(t,r)?t[r]:Number.isInteger(Number(n[1]))?[]:{},e,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(t)?t.slice()[r]:Object.assign({},t,{[r]:e})}function F(t,e){if(null==t||0===e.length)return t;if(1===e.length){if(null==t)return t;if(Number.isInteger(e[0])&&Array.isArray(t))return Array.prototype.slice.call(t,0).splice(e[0],1);const n={};for(const e in t)n[e]=t[e];return delete n[e[0]],n}if(null==t[e[0]]){if(Number.isInteger(e[0])&&Array.isArray(t))return Array.prototype.concat.call([],t);const n={};for(const e in t)n[e]=t[e];return n}return x(t,F(t[e[0]],Array.prototype.slice.call(e,1)),[e[0]])}function C(t,e){return e.map(t=>t.split(".")).map(e=>[e,M(t,e)]).filter(t=>void 0!==t[1]).reduce((t,e)=>x(t,e[1],e[0]),{})}function W(t,e){return e.map(t=>t.split(".")).reduce((t,e)=>F(t,e),t)}function q(t,{storage:e,serializer:n,key:r,debug:o,pick:s,omit:a,beforeHydrate:c,afterHydrate:i},u,l=!0){try{l&&(null==c||c(u));const o=e.getItem(r);if(o){const e=n.deserialize(o),r=s?C(e,s):e,c=a?W(r,a):r;t.$patch(c)}l&&(null==i||i(u))}catch(f){}}function B(t,{storage:e,serializer:n,key:r,debug:o,pick:s,omit:a}){try{const o=s?C(t,s):t,c=a?W(o,a):o,i=n.serialize(c);e.setItem(r,i)}catch(c){}}var D=function(t={}){return function(e){var n;!function(t,e,n){const{pinia:r,store:o,options:{persist:s=n}}=t;if(!s)return;if(!(o.$id in r.state.value)){const t=r._s.get(o.$id.replace("__hot:",""));return void(t&&Promise.resolve().then(()=>t.$persist()))}const a=(Array.isArray(s)?s:!0===s?[{}]:[s]).map(e);o.$hydrate=({runHooks:e=!0}={})=>{a.forEach(n=>{q(o,n,t,e)})},o.$persist=()=>{a.forEach(t=>{B(o.$state,t)})},a.forEach(e=>{q(o,e,t),o.$subscribe((t,n)=>B(n,e),{detached:!0})})}(e,n=>{var r,o,s,a,c,i,u,l;const f=(p=n.key,y=e.store.$id,"function"==typeof p?p(y):"string"==typeof p?p:y);var p,y;return{key:(t.key?t.key:t=>t)(f),debug:null!=(o=null!=(r=n.debug)?r:t.debug)&&o,serializer:null!=(a=null!=(s=n.serializer)?s:t.serializer)?a:{serialize:t=>JSON.stringify(t),deserialize:t=>JSON.parse(t)},storage:null!=(i=null!=(c=n.storage)?c:t.storage)?i:window.localStorage,beforeHydrate:null!=(u=n.beforeHydrate)?u:t.beforeHydrate,afterHydrate:null!=(l=n.afterHydrate)?l:t.afterHydrate,pick:n.pick,omit:n.omit}},null!=(n=t.auto)&&n)}}();export{_ as c,J as d,D as s};
