var e=Object.getOwnPropertyNames,t=(e,t,r)=>new Promise((s,a)=>{var o=e=>{try{n(r.next(e))}catch(t){a(t)}},i=e=>{try{n(r.throw(e))}catch(t){a(t)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,i);n((r=r.apply(e,t)).next())});import{r,j as s,k as a,l as o,p as i,q as n,F as l,s as c,u as d,v as u,f as m,x as p,y as h,z as v,A as f,B as g}from"./vendor-vue-BkWnER2I.js";import{d as b,c as _,s as y}from"./vendor-store-Df1P0cHc.js";import{a as w}from"./vendor-utils-CUZGapLB.js";import{h as k}from"./vendor-other-BL_KQfZI.js";var O,U,x=(O={"js/index-BiO9QKFm.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const O=w.create({timeout:1e4,baseURL:"/"});O.interceptors.request.use(e=>e,e=>Promise.reject(e)),O.interceptors.response.use(e=>e&&200<=e.status<=299?e.data:Promise.reject(e),e=>Promise.reject(e));const U=b("article",()=>{const e=r([]);return{articleList:e,getArticleData:()=>t(null,null,function*(){return O("/api/getArticle").then(r=>t(null,null,function*(){e.value=Object.values(r)})).catch(t=>{e.value=[]})})}},{enabled:!0,strategies:[{key:"article",storage:localStorage,paths:["articleList"]}]}),x=_();x.use(y);const I={wmCanvasUrl:"",wmObserver:null,wmDiv:null,updateTimer:null,isUpdating:!1,createWatermark({text:e=["默认水印"],width:t=300,height:r=200,font:s="13px Microsoft YaHei",color:a="rgba(180,180,180,0.3)",lineHeight:o=20,angle:i=-20}){const n=document.createElement("canvas");n.width=t,n.height=r;const l=n.getContext("2d");l.clearRect(0,0,t,r),l.fillStyle=a,l.font=s,l.textBaseline="top",l.setTransform(1,0,0,1,t/2,r/2),l.rotate(i*Math.PI/180);const c=[...e,k().format("YYYY-MM-DD HH:mm:ss")];let d=-c.length*o/2;c.forEach(e=>{const t=l.measureText(e).width;l.fillText(e,-t/2,d),d+=o}),this.wmCanvasUrl=n.toDataURL()},renderWatermark(){if(!this.isUpdating){this.isUpdating=!0;try{const e=document.getElementById("__global_watermark");e&&e.remove();const t=document.createElement("div");t.id="__global_watermark",Object.assign(t.style,{position:"fixed",inset:"0",zIndex:"999999",pointerEvents:"none",backgroundImage:`url(${this.wmCanvasUrl})`,backgroundRepeat:"repeat"}),document.body.appendChild(t),this.wmDiv=t}finally{this.isUpdating=!1}}},startObserver(){this.wmObserver&&this.wmObserver.disconnect(),this.wmObserver=new MutationObserver(e=>{if(this.isUpdating)return;let t=!1;const r=document.getElementById("__global_watermark");e.forEach(e=>{(e.removedNodes.length||e.addedNodes.length||"__global_watermark"===e.target.id&&"style"===e.attributeName)&&(t=!0)}),!t||r&&r.style.backgroundImage===`url("${this.wmCanvasUrl}")`||this.renderWatermark()}),this.wmObserver.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})},setWatermark(e={}){this.createWatermark(e),this.renderWatermark(),this.startObserver()},startAutoUpdate(e,t=1e3){this.stopAutoUpdate(),this.setWatermark(e);const r=()=>{this.createWatermark(e),this.renderWatermark(),this.updateTimer=setTimeout(r,t)};this.updateTimer=setTimeout(r,t)},stopAutoUpdate(){clearTimeout(this.updateTimer),this.updateTimer=null},removeWatermark(){var e;this.stopAutoUpdate(),null==(e=this.wmObserver)||e.disconnect(),this.wmObserver=null;const t=document.getElementById("__global_watermark");t&&t.remove(),this.wmDiv=null,this.isUpdating=!1}},j=(e,t)=>{const r=e.__vccOpts||e;for(const[s,a]of t)r[s]=a;return r},A=j({__name:"App",setup:e=>(I.startAutoUpdate({text:["测试","水印"]}),(e,t)=>{const r=a("RouterView");return o(),s(r)})},[["__scopeId","data-v-c01f3bf4"]]),D={class:"post-item-title"},T={class:"post-item-body"},L={class:"post-item-footer"},E={class:"footer-left"},P=j({__name:"ArticleItem",setup(e){const s=U(),a=r([]);return t(null,null,function*(){yield s.getArticleData(),a.value=s.articleList}),(e,t)=>(o(!0),i(l,null,n(a.value,e=>(o(),i("div",{class:"postsList",key:e.id},[c("div",D,d(e.title),1),c("div",T,d(e.body),1),c("div",L,[c("div",E,"发布者："+d(e.userId),1),t[0]||(t[0]=c("div",{class:"footer-right"},[c("button",null,"11111")],-1))])]))),128))}},[["__scopeId","data-v-c907761d"]]);k.locale("zh-cn");const W={class:"header-class"},Y={class:"right"},M=j({__name:"GlobalTop",setup(e){const t=((e={})=>{const{format:t="YYYY-MM-DD HH:mm:ss",interval:s=1e3,autoUpdate:a=!0}=e,o=r(new Date);let i;return a&&(i=setInterval(()=>{o.value=new Date},s),u(()=>clearInterval(i))),m(()=>k(o.value).format(t))})();return(e,r)=>(o(),i("div",W,[r[0]||(r[0]=c("div",{class:"left"},"无限公司",-1)),c("div",Y,d(p(t)),1)]))}},[["__scopeId","data-v-d4aaec33"]]),H={class:"footer-class"},N=j({},[["render",function(e,t){return o(),i("div",H,"版权所有，翻版必究！")}],["__scopeId","data-v-e18a12ed"]]),C={class:"home"},B=j({__name:"HomeView",setup:e=>(e,t)=>(o(),i("div",C,[h(p(M)),c("div",null,[h(P)]),h(p(N))]))},[["__scopeId","data-v-4446b051"]]),R=v({history:f("/"),routes:[{path:"/",name:"home",component:B,meta:{title:"home"}}]});R.beforeEach((e,t,r)=>{document.title=e.meta.title||"默认标题",r()});const q=g(A);q.use(x),q.use(R),q.mount("#app")}},function(){return U||(0,O[e(O)[0]])((U={exports:{}}).exports,U),U.exports});export default x();
